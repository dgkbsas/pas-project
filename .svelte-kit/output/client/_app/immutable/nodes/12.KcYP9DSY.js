import"../chunks/CWj6FrbW.js";import{a8 as Y,aw as F,ax as G,b as m,ay as Z,az as ee,a as u,a9 as ae,aA as re,f as g,d as l,aa as e,A as v,aE as te,aB as le,t as se,av as P,g as s,aC as oe,ab as ie,aD as b}from"../chunks/T0dPp4D2.js";import{b as ve}from"../chunks/DmB7dAFv.js";import{g as A}from"../chunks/CdRlIqj1.js";import{B as O}from"../chunks/BpcvKk5C.js";import{I as h}from"../chunks/CCnm1ovl.js";import{S as C}from"../chunks/CeFSUsR7.js";import{C as T}from"../chunks/Ch5CQVJw.js";import{s as w}from"../chunks/C8FjytsP.js";import{A as de}from"../chunks/DTsacfhv.js";import{S as pe}from"../chunks/CSXst1GK.js";var ne=m("<!> Volver",1),ce=m('<div class="card-header svelte-1py8aeq"><h2 class="svelte-1py8aeq">Información General</h2></div> <div class="form-grid svelte-1py8aeq"><div class="form-group svelte-1py8aeq"><label for="client_id" class="svelte-1py8aeq">Cliente <span class="required svelte-1py8aeq">*</span></label> <!></div> <div class="form-group svelte-1py8aeq"><label for="policy_number" class="svelte-1py8aeq">Número de Póliza <span class="required svelte-1py8aeq">*</span></label> <!></div> <div class="form-group svelte-1py8aeq"><label for="policy_type" class="svelte-1py8aeq">Tipo de Seguro <span class="required svelte-1py8aeq">*</span></label> <!></div> <div class="form-group svelte-1py8aeq"><label for="payment_mode" class="svelte-1py8aeq">Modalidad de Pago</label> <!></div> <div class="form-group svelte-1py8aeq"><label for="vehicle_plate" class="svelte-1py8aeq">Matrícula (si aplica)</label> <!></div></div>',1),ue=m('<div class="card-header svelte-1py8aeq"><h2 class="svelte-1py8aeq">Fechas</h2></div> <div class="form-grid svelte-1py8aeq"><div class="form-group svelte-1py8aeq"><label for="start_date" class="svelte-1py8aeq">Fecha de Inicio <span class="required svelte-1py8aeq">*</span></label> <!></div> <div class="form-group svelte-1py8aeq"><label for="expiry_date" class="svelte-1py8aeq">Fecha de Vencimiento <span class="required svelte-1py8aeq">*</span></label> <!></div></div>',1),_e=m('<div class="card-header svelte-1py8aeq"><h2 class="svelte-1py8aeq">Observaciones</h2></div> <div class="form-group svelte-1py8aeq"><label for="observations" class="svelte-1py8aeq">Observaciones</label> <textarea id="observations" placeholder="Información adicional sobre la póliza..." rows="4" class="svelte-1py8aeq"></textarea></div>',1),me=m("<!> ",1),ye=m('<div class="page svelte-1py8aeq"><div class="page-header svelte-1py8aeq"><div class="svelte-1py8aeq"><!> <h1 class="svelte-1py8aeq">Nueva Póliza</h1> <p class="svelte-1py8aeq">Completa los datos para registrar una nueva póliza</p></div></div> <form class="svelte-1py8aeq"><!> <!> <!> <div class="form-actions svelte-1py8aeq"><!> <!></div></form></div>');function Oe(j,M){Y(M,!0);let y=G(!1),t=F({client_id:"",policy_number:"",policy_type:"",payment_mode:"",start_date:"",expiry_date:"",vehicle_plate:"",observations:""}),d=G(F({}));const H=[{value:"Auto",label:"Auto"},{value:"Hogar",label:"Hogar"},{value:"Vida",label:"Vida"},{value:"Salud",label:"Salud"},{value:"Negocio",label:"Negocio"},{value:"Otro",label:"Otro"}],J=[{value:"Mensual",label:"Mensual"},{value:"Trimestral",label:"Trimestral"},{value:"Semestral",label:"Semestral"},{value:"Anual",label:"Anual"}],L=te(()=>M.data.clients.map(r=>({value:r.id,label:`${r.first_name} ${r.last_name}`})));async function K(r){r.preventDefault(),b(y,!0),b(d,{},!0);try{const p=await fetch("/api/policies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await p.json();p.ok?(w({type:"success",message:"Póliza creada exitosamente"}),A("/polizas")):(a.errors&&b(d,a.errors,!0),w({type:"error",message:a.message||"Error al crear póliza"}))}catch{w({type:"error",message:"Error al crear póliza"})}finally{b(y,!1)}}var q=ye();Z(r=>{re.title="Nueva Póliza - PAS Manager"});var $=l(q),N=l($),Q=l(N);O(Q,{variant:"ghost",size:"sm",onclick:()=>A("/polizas"),children:(r,p)=>{var a=ne(),o=g(a);de(o,{size:18}),P(),u(r,a)},$$slots:{default:!0}}),P(4),s(N),s($);var x=e($,2),I=l(x);T(I,{children:(r,p)=>{var a=ce(),o=e(g(a),2),i=l(o),f=e(l(i),2);C(f,{id:"client_id",get options(){return v(L)},placeholder:"Selecciona un cliente",get error(){return v(d).client_id},required:!0,get value(){return t.client_id},set value(n){t.client_id=n}}),s(i);var _=e(i,2),z=e(l(_),2);h(z,{id:"policy_number",placeholder:"POL-2024-001",get error(){return v(d).policy_number},required:!0,get value(){return t.policy_number},set value(n){t.policy_number=n}}),s(_);var c=e(_,2),U=e(l(c),2);C(U,{id:"policy_type",get options(){return H},placeholder:"Selecciona un tipo",get error(){return v(d).policy_type},required:!0,get value(){return t.policy_type},set value(n){t.policy_type=n}}),s(c);var S=e(c,2),W=e(l(S),2);C(W,{id:"payment_mode",get options(){return J},placeholder:"Selecciona modalidad",get error(){return v(d).payment_mode},get value(){return t.payment_mode},set value(n){t.payment_mode=n}}),s(S);var E=e(S,2),X=e(l(E),2);h(X,{id:"vehicle_plate",placeholder:"ABC1234",get error(){return v(d).vehicle_plate},get value(){return t.vehicle_plate},set value(n){t.vehicle_plate=n}}),s(E),s(o),u(r,a)},$$slots:{default:!0}});var B=e(I,2);T(B,{children:(r,p)=>{var a=ue(),o=e(g(a),2),i=l(o),f=e(l(i),2);h(f,{id:"start_date",type:"date",get error(){return v(d).start_date},required:!0,get value(){return t.start_date},set value(c){t.start_date=c}}),s(i);var _=e(i,2),z=e(l(_),2);h(z,{id:"expiry_date",type:"date",get error(){return v(d).expiry_date},required:!0,get value(){return t.expiry_date},set value(c){t.expiry_date=c}}),s(_),s(o),u(r,a)},$$slots:{default:!0}});var V=e(B,2);T(V,{children:(r,p)=>{var a=_e(),o=e(g(a),2),i=e(l(o),2);oe(i),s(o),ve(i,()=>t.observations,f=>t.observations=f),u(r,a)},$$slots:{default:!0}});var k=e(V,2),D=l(k);O(D,{type:"button",variant:"outline",onclick:()=>A("/polizas"),get disabled(){return v(y)},children:(r,p)=>{P();var a=le("Cancelar");u(r,a)},$$slots:{default:!0}});var R=e(D,2);O(R,{type:"submit",variant:"primary",get disabled(){return v(y)},children:(r,p)=>{var a=me(),o=g(a);pe(o,{size:18});var i=e(o);se(()=>ie(i,` ${v(y)?"Guardando...":"Guardar Póliza"}`)),u(r,a)},$$slots:{default:!0}}),s(k),s(x),s(q),ee("submit",x,K),u(j,q),ae()}export{Oe as component};
