import"../chunks/CWj6FrbW.js";import{o as We}from"../chunks/C_FCoYF_.js";import{c as se,f as j,a as u,ag as Ye,a7 as Ze,a8 as y,a9 as me,b,aa as et,ad as d,d as r,U as n,t as L,ab as tt,a3 as e,ac as at,ae as H,r as s,ah as $,af as U,ak as st,aB as rt}from"../chunks/dGHTYzhB.js";import{i as z}from"../chunks/_danfitL.js";import{s as it,r as R,b as ae,c as ge,e as we,i as ye}from"../chunks/X3gEIfGK.js";import{c as lt}from"../chunks/CfIVFlu0.js";import{s as be}from"../chunks/BZZkyLtE.js";import"../chunks/Qt_sPRvb.js";import{F as nt,A as ot,a as ct,S as dt,I as vt}from"../chunks/C2tzjyNj.js";import{E as pt}from"../chunks/CgF9W7Br.js";/* empty css                */import{B as _t}from"../chunks/CVV7PiZW.js";import{C as xe}from"../chunks/v23htMxj.js";import{X as ut}from"../chunks/Z30GsDLy.js";import"../chunks/Bf0aZHXT.js";import{I as ke,s as Fe}from"../chunks/DblrYRE4.js";import{l as Ae,s as Me}from"../chunks/pnKjlpSc.js";import{F as ft}from"../chunks/BOk7XFuN.js";import{U as ht}from"../chunks/DaxW58Sj.js";function $e(v,l){const c=Ae(l,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const h=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"}]];ke(v,Me({name:"activity"},()=>c,{get iconNode(){return h},children:(g,k)=>{var F=se(),A=j(F);Fe(A,l,"default",{}),u(g,F)},$$slots:{default:!0}}))}function mt(v,l){const c=Ae(l,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const h=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}],["path",{d:"M12 11h4"}],["path",{d:"M12 16h4"}],["path",{d:"M8 11h.01"}],["path",{d:"M8 16h.01"}]];ke(v,Me({name:"clipboard-list"},()=>c,{get iconNode(){return h},children:(g,k)=>{var F=se(),A=j(F);Fe(A,l,"default",{}),u(g,F)},$$slots:{default:!0}}))}function gt(v,l,c,h,g){d(l,e(l)==="asc"?"desc":"asc",!0),d(c,1),d(h,[],!0),g()}var wt=(v,l)=>d(l,!e(l)),yt=b('<span class="filter-badge svelte-wernd1"> </span>'),bt=b('<button class="clear-filters-btn svelte-wernd1" title="Limpiar filtros"><!> Limpiar filtros</button>'),xt=b('<span class="count-skeleton svelte-wernd1"></span>'),$t=b('<span class="count-text svelte-wernd1"> </span> <span class="count-separator svelte-wernd1">/</span> <span class="count-total svelte-wernd1"> </span>',1),kt=(v,l)=>l("types","client"),Ft=(v,l)=>l("types","policy"),At=(v,l)=>l("types","followup"),Mt=(v,l)=>l("dateFrom",v.currentTarget.value),St=(v,l)=>l("dateTo",v.currentTarget.value),zt=b('<div class="filters-panel svelte-wernd1"><div class="filter-group svelte-wernd1"><label class="filter-label svelte-wernd1">Tipo de Actividad</label> <div class="filter-options svelte-wernd1"><label class="checkbox-label svelte-wernd1"><input type="checkbox" class="svelte-wernd1"/> <span class="svelte-wernd1">Clientes</span></label> <label class="checkbox-label svelte-wernd1"><input type="checkbox" class="svelte-wernd1"/> <span class="svelte-wernd1">Pólizas</span></label> <label class="checkbox-label svelte-wernd1"><input type="checkbox" class="svelte-wernd1"/> <span class="svelte-wernd1">Seguimientos</span></label></div></div> <div class="filter-group svelte-wernd1"><label class="filter-label svelte-wernd1">Rango de Fechas</label> <div class="date-range svelte-wernd1"><input type="date" placeholder="Desde" class="svelte-wernd1"/> <span class="svelte-wernd1">hasta</span> <input type="date" placeholder="Hasta" class="svelte-wernd1"/></div></div></div>'),Tt=b('<div class="skeleton-list svelte-wernd1"></div>'),Ct=b('<div class="activity-card svelte-wernd1"><div><!></div> <div class="activity-content svelte-wernd1"><div class="activity-header svelte-wernd1"><h3 class="activity-title svelte-wernd1"> </h3> <!></div> <p class="activity-description svelte-wernd1"> </p> <div class="activity-footer svelte-wernd1"><span class="activity-entity svelte-wernd1"> </span> <span class="activity-date svelte-wernd1"><!> </span></div></div></div>'),Lt=b('<div class="activities-list svelte-wernd1"></div> <!>',1),Pt=b('<div class="page svelte-wernd1"><div class="page-header svelte-wernd1"><div class="svelte-wernd1"><h1 class="svelte-wernd1">Actividades Recientes</h1> <p class="svelte-wernd1">Historial completo de actividad en el sistema</p></div></div> <div class="filters-toolbar svelte-wernd1"><div class="toolbar-actions svelte-wernd1"><button title="Filtros"><!> <!></button> <!> <button class="sort-btn svelte-wernd1"><!> Fecha <!></button> <div class="results-count svelte-wernd1"><!></div></div></div> <!> <!></div>');function Zt(v,l){Ze(l,!0);let c=y(me([])),h=y(!0),g=y(!1),k=y(1),F=30,A=y(0),G=y(!0),J=y(!1),Se="date",O=y("desc"),o=y(me({types:[],dateFrom:"",dateTo:""}));We(()=>{P()});async function P(t=!1){var a;t?d(g,!0):d(h,!0);try{const i=new URLSearchParams({page:e(k).toString(),limit:F.toString(),sortBy:Se,sortOrder:e(O)});e(o).types.forEach(p=>{i.append("type",p)}),e(o).dateFrom&&i.append("date_from",e(o).dateFrom),e(o).dateTo&&i.append("date_to",e(o).dateTo);const f=await fetch(`/api/activities?${i}`),_=await f.json();f.ok?(t?d(c,[...e(c),..._.activities||[]],!0):d(c,_.activities||[],!0),d(A,((a=_.pagination)==null?void 0:a.total)||0,!0),d(G,e(c).length<e(A))):(console.error("Error loading activities:",_.message),d(c,[],!0))}catch(i){console.error("Error loading activities:",i),d(c,[],!0)}finally{d(h,!1),d(g,!1)}}function ze(){!e(h)&&!e(g)&&e(G)&&(rt(k),P(!0))}function Te(t){return new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Ce(t){switch(t){case"client":return ht;case"policy":return ft;case"followup":return mt;default:return $e}}function Le(t){switch(t){case"client":return"info";case"policy":return"success";case"followup":return"warning";default:return"default"}}function E(t,a){t==="types"?e(o).types.includes(a)?e(o).types=e(o).types.filter(i=>i!==a):e(o).types=[...e(o).types,a]:e(o)[t]=a,d(k,1),d(c,[],!0),P()}function re(){d(o,{types:[],dateFrom:"",dateTo:""},!0),d(k,1),d(c,[],!0),P()}const T=H(()=>()=>{let t=e(o).types.length;return e(o).dateFrom&&t++,e(o).dateTo&&t++,t});var K=Pt();et(t=>{at.title="Actividades - PAS Manager"});var Q=n(r(K),2),ie=r(Q),I=r(ie);let le;I.__click=[wt,J];var ne=r(I);nt(ne,{size:18});var Pe=n(ne,2);{var Ee=t=>{var a=yt(),i=r(a,!0);s(a),L(f=>$(i,f),[()=>e(T)()]),u(t,a)};z(Pe,t=>{e(T)()>0&&t(Ee)})}s(I);var oe=n(I,2);{var Ie=t=>{var a=bt();a.__click=re;var i=r(a);ut(i,{size:18}),U(),s(a),u(t,a)};z(oe,t=>{e(T)()>0&&t(Ie)})}var N=n(oe,2);N.__click=[gt,O,k,c,P];var ce=r(N);xe(ce,{size:16});var Ne=n(ce,2);{var De=t=>{ot(t,{size:16})},Be=t=>{ct(t,{size:16})};z(Ne,t=>{e(O)==="asc"?t(De):t(Be,!1)})}s(N);var de=n(N,2),He=r(de);{var Ue=t=>{var a=xt();u(t,a)},Re=t=>{var a=$t(),i=j(a),f=r(i,!0);s(i);var _=n(i,4),p=r(_,!0);s(_),L(()=>{$(f,e(c).length),$(p,e(A))}),u(t,a)};z(He,t=>{e(h)&&e(c).length===0?t(Ue):t(Re,!1)})}s(de),s(ie),s(Q);var ve=n(Q,2);{var je=t=>{var a=zt(),i=r(a),f=n(r(i),2),_=r(f),p=r(_);R(p),p.__change=[kt,E],U(2),s(_);var x=n(_,2),w=r(x);R(w),w.__change=[Ft,E],U(2),s(x);var V=n(x,2),D=r(V);R(D),D.__change=[At,E],U(2),s(V),s(f),s(i);var m=n(i,2),X=n(r(m),2),M=r(X);R(M),M.__change=[Mt,E];var S=n(M,4);R(S),S.__change=[St,E],s(X),s(m),s(a),L((C,W,q)=>{ae(p,C),ae(w,W),ae(D,q),ge(M,e(o).dateFrom),ge(S,e(o).dateTo)},[()=>e(o).types.includes("client"),()=>e(o).types.includes("policy"),()=>e(o).types.includes("followup")]),u(t,a)};z(ve,t=>{e(J)&&t(je)})}var Oe=n(ve,2);{var Ve=t=>{var a=Tt();we(a,20,()=>Array(10),ye,(i,f)=>{dt(i,{height:"80px"})}),s(a),u(t,a)},Xe=t=>{var a=se(),i=j(a);{var f=p=>{{let x=H(()=>e(T)()>0?"No se encontraron resultados con los filtros aplicados":"Aún no hay actividad registrada en el sistema"),w=H(()=>e(T)()>0?{label:"Limpiar filtros",onclick:re}:void 0);pt(p,{get icon(){return $e},title:"No hay actividades",get description(){return e(x)},get action(){return e(w)}})}},_=p=>{var x=Lt(),w=j(x);we(w,21,()=>e(c),ye,(D,m)=>{const X=H(()=>Ce(e(m).type)),M=H(()=>Le(e(m).type));var S=Ct(),C=r(S),W=r(C);lt(W,()=>e(X),(B,fe)=>{fe(B,{size:20})}),s(C);var q=n(C,2),Y=r(q),Z=r(Y),qe=r(Z,!0);s(Z);var Ge=n(Z,2);_t(Ge,{get variant(){return e(M)},children:(B,fe)=>{U();var he=st();L(()=>$(he,e(m).type)),u(B,he)},$$slots:{default:!0}}),s(Y);var ee=n(Y,2),Je=r(ee,!0);s(ee);var pe=n(ee,2),te=r(pe),Ke=r(te,!0);s(te);var _e=n(te,2),ue=r(_e);xe(ue,{size:14});var Qe=n(ue);s(_e),s(pe),s(q),s(S),L(B=>{be(C,1,`activity-icon activity-icon-${e(M)??""}`,"svelte-wernd1"),$(qe,e(m).title),$(Je,e(m).description),$(Ke,e(m).entity_name),$(Qe,` ${B??""}`)},[()=>Te(e(m).date)]),u(D,S)}),s(w);var V=n(w,2);vt(V,{get hasMore(){return e(G)},onLoadMore:ze}),u(p,x)};z(i,p=>{e(c).length===0?p(f):p(_,!1)},!0)}u(t,a)};z(Oe,t=>{e(h)?t(Ve):t(Xe,!1)})}s(K),L(t=>{le=be(I,1,"filter-btn svelte-wernd1",null,le,t),it(N,"title",e(O)==="asc"?"Ascendente":"Descendente")},[()=>({active:e(J)||e(T)()>0})]),u(v,K),tt()}Ye(["click","change"]);export{Zt as component};
