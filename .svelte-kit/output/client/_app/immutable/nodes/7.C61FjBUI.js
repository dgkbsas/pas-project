import"../chunks/CWj6FrbW.js";import{o as D}from"../chunks/DFUbiISE.js";import{a7 as F,a8 as l,a9 as I,b as y,aa as J,a as n,ab as N,ac as O,f as b,d as h,U as V,ad as r,a3 as s,ae as q,af as w,r as _,c as G}from"../chunks/BKJL6YfG.js";import{i as E}from"../chunks/CX_YFbLR.js";import{a as H,b as K}from"../chunks/B-WhYZDZ.js";import{g as o}from"../chunks/EB3MSLgs.js";import{p as L}from"../chunks/DVeIWuaj.js";import{B as Q}from"../chunks/PkYitcBM.js";import{C as R}from"../chunks/B5VaIDmY.js";import{s as i}from"../chunks/CqXjdqoA.js";import{A as W}from"../chunks/cKUVvFVp.js";var X=y("<!> Volver",1),Y=y('<div class="loading-state svelte-tr29t"><p class="svelte-tr29t">Cargando datos del cliente...</p></div>'),Z=y('<div class="page svelte-tr29t"><div class="page-header svelte-tr29t"><div class="svelte-tr29t"><!> <h1 class="svelte-tr29t">Editar Cliente</h1> <p class="svelte-tr29t">Modifica los datos del cliente</p></div></div> <!></div>');function pe(z,k){F(k,!0);const x=()=>K(L,"$page",S),[S,j]=H();let $=q(()=>x().params.id),c=l(!1),d=l(!0),p=l(I({})),m=l(null);D(async()=>{await A()});async function A(){r(d,!0);try{const e=await fetch(`/api/clients/${s($)}`),t=await e.json();e.ok?r(m,t.client,!0):(i({type:"error",message:t.message||"Error al cargar cliente"}),o("/clientes"))}catch{i({type:"error",message:"Error al cargar cliente"}),o("/clientes")}finally{r(d,!1)}}async function M(e){r(c,!0),r(p,{},!0);try{const t=await fetch(`/api/clients/${s($)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();t.ok?(i({type:"success",message:"Cliente actualizado exitosamente"}),o("/clientes")):(a.errors&&r(p,a.errors,!0),i({type:"error",message:a.message||"Error al actualizar cliente"}))}catch{i({type:"error",message:"Error al actualizar cliente"})}finally{r(c,!1)}}var v=Z();J(e=>{O.title="Editar Cliente - PAS Manager"});var f=h(v),C=h(f),P=h(C);Q(P,{variant:"ghost",size:"sm",onclick:()=>o("/clientes"),children:(e,t)=>{var a=X(),g=b(a);W(g,{size:18}),w(),n(e,a)},$$slots:{default:!0}}),w(4),_(C),_(f);var T=V(f,2);{var B=e=>{var t=Y();n(e,t)},U=e=>{var t=G(),a=b(t);{var g=u=>{R(u,{mode:"edit",get initialData(){return s(m)},get loading(){return s(c)},get errors(){return s(p)},onSubmit:M,onCancel:()=>o("/clientes")})};E(a,u=>{s(m)&&u(g)},!0)}n(e,t)};E(T,e=>{s(d)?e(B):e(U,!1)})}_(v),n(z,v),N(),j()}export{pe as component};
