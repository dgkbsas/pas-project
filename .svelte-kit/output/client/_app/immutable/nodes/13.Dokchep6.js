import"../chunks/CWj6FrbW.js";import{b as A,s as F,aa as _,d as $,a as u,n as N,g as x,a8 as z,a1 as O,a9 as R,f as U,aB as S,aD as L,A as v,ax as k,t as j,av as P,ab as J}from"../chunks/T0dPp4D2.js";import{a as G}from"../chunks/Dnkb2mmd.js";import{i as K,a as Q,b as V,c as W}from"../chunks/CdRlIqj1.js";import{s as D}from"../chunks/C8FjytsP.js";import{B as X}from"../chunks/BpcvKk5C.js";import{I as H}from"../chunks/CCnm1ovl.js";import{C as Y}from"../chunks/Ch5CQVJw.js";import{i as Z}from"../chunks/iIrk5DBN.js";import{a as ee}from"../chunks/BjbfY3vJ.js";import{p as I,r as te}from"../chunks/x5bn8cLp.js";function ae(t){const s=JSON.parse(t);return s.data&&(s.data=V(s.data,W.decoders)),s}function M(t){return HTMLElement.prototype.cloneNode.call(t)}function C(t,s=()=>{}){const m=async({action:e,result:i,reset:l=!0,invalidateAll:o=!0})=>{i.type==="success"&&(l&&HTMLFormElement.prototype.reset.call(t),o&&await K()),(location.origin+location.pathname===e.origin+e.pathname||i.type==="redirect"||i.type==="error")&&await Q(i)};async function p(e){var q,h,y;if(((q=e.submitter)!=null&&q.hasAttribute("formmethod")?e.submitter.formMethod:M(t).method)!=="post")return;e.preventDefault();const l=new URL((h=e.submitter)!=null&&h.hasAttribute("formaction")?e.submitter.formAction:M(t).action),o=(y=e.submitter)!=null&&y.hasAttribute("formenctype")?e.submitter.formEnctype:M(t).enctype,n=new FormData(t,e.submitter),c=new AbortController;let f=!1;const w=await s({action:l,cancel:()=>f=!0,controller:c,formData:n,formElement:t,submitter:e.submitter})??m;if(f)return;let d;try{const r=new Headers({accept:"application/json","x-sveltekit-action":"true"});o!=="multipart/form-data"&&r.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(o)?o:"application/x-www-form-urlencoded");const T=o==="multipart/form-data"?n:new URLSearchParams(n),a=await fetch(l,{method:"POST",headers:r,cache:"no-store",body:T,signal:c.signal});d=ae(await a.text()),d.type==="error"&&(d.status=a.status)}catch(r){if((r==null?void 0:r.name)==="AbortError")return;d={type:"error",error:r}}await w({action:l,formData:n,formElement:t,update:r=>m({action:l,result:d,reset:r==null?void 0:r.reset,invalidateAll:r==null?void 0:r.invalidateAll}),result:d})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",p),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",p)}}}var re=A('<span class="required svelte-1uz2vuh">*</span>'),se=A("<label><!> <!></label>");function B(t,s){let m=I(s,"required",3,!1),p=I(s,"class",3,""),e=te(s,["$$slots","$$events","$$legacy","required","class","children"]);var i=se();ee(i,()=>({class:`label ${p()??""}`,...e}),void 0,void 0,"svelte-1uz2vuh");var l=$(i);F(l,()=>s.children??N);var o=_(l,2);{var n=c=>{var f=re();u(c,f)};Z(o,c=>{m()&&c(n)})}x(i),u(t,i)}var ie=A('<div class="header-content svelte-1i2smtp"><div class="logo svelte-1i2smtp"><span class="logo-icon svelte-1i2smtp">ðŸ“‹</span> <span class="logo-text svelte-1i2smtp">PAS Manager</span></div> <h1 class="svelte-1i2smtp">Iniciar SesiÃ³n</h1> <p class="subtitle svelte-1i2smtp">Accede a tu cuenta</p></div>'),oe=A('<form method="POST" action="?/login" class="form svelte-1i2smtp"><div class="form-group svelte-1i2smtp"><!> <!></div> <div class="form-group svelte-1i2smtp"><!> <!></div> <!></form> <div class="signup-link svelte-1i2smtp">Â¿No tienes cuenta? <a href="/auth/signup" class="svelte-1i2smtp">RegÃ­strate aquÃ­</a></div>',1),le=A('<div class="auth-container fade-in svelte-1i2smtp"><!></div>');function we(t,s){z(s,!0);let m=k(""),p=k(""),e=k(!1);O(()=>{var o;(o=s.form)!=null&&o.message&&D({type:"error",message:s.form.message})});var i=le(),l=$(i);Y(l,{class:"auth-card",header:n=>{var c=ie();u(n,c)},children:(n,c)=>{var f=oe(),E=U(f),w=$(E),d=$(w);B(d,{for:"email",required:!0,children:(a,b)=>{P();var g=S("Email");u(a,g)},$$slots:{default:!0}});var q=_(d,2);H(q,{id:"email",name:"email",type:"email",placeholder:"tu@email.com",get disabled(){return v(e)},required:!0,get value(){return v(m)},set value(a){L(m,a,!0)}}),x(w);var h=_(w,2),y=$(h);B(y,{for:"password",required:!0,children:(a,b)=>{P();var g=S("ContraseÃ±a");u(a,g)},$$slots:{default:!0}});var r=_(y,2);H(r,{id:"password",name:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",get disabled(){return v(e)},required:!0,get value(){return v(p)},set value(a){L(p,a,!0)}}),x(h);var T=_(h,2);X(T,{type:"submit",class:"w-full",get loading(){return v(e)},get disabled(){return v(e)},children:(a,b)=>{P();var g=S();j(()=>J(g,v(e)?"Iniciando sesiÃ³n...":"Iniciar SesiÃ³n")),u(a,g)},$$slots:{default:!0}}),x(E),G(E,(a,b)=>C==null?void 0:C(a,b),()=>()=>(L(e,!0),async({result:a})=>{L(e,!1),a.type==="redirect"&&(D({type:"success",message:"Â¡Bienvenido!"}),await new Promise(b=>setTimeout(b,300)),window.location.href=a.location||"/dashboard")})),P(2),u(n,f)},$$slots:{header:!0,default:!0}}),x(i),u(t,i),R()}export{we as component};
