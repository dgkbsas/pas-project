import"../chunks/CWj6FrbW.js";import{o as C}from"../chunks/DFUbiISE.js";import{a7 as N,a8 as f,a9 as g,b as _,aa as T,a as u,ab as j,ac as k,f as B,d as n,U as D,a3 as h,ad as s,af as y,r as p}from"../chunks/BKJL6YfG.js";import{a as E,b as M}from"../chunks/B-WhYZDZ.js";import{g as c}from"../chunks/EB3MSLgs.js";import{p as O}from"../chunks/DVeIWuaj.js";import{B as F}from"../chunks/PkYitcBM.js";import{P as I}from"../chunks/DqKn0-zz.js";import{s as m}from"../chunks/CqXjdqoA.js";import{A as J}from"../chunks/cKUVvFVp.js";var U=_("<!> Volver",1),V=_('<div class="page svelte-1py8aeq"><div class="page-header svelte-1py8aeq"><div class="svelte-1py8aeq"><!> <h1 class="svelte-1py8aeq">Nueva Póliza</h1> <p class="svelte-1py8aeq">Completa los datos para registrar una nueva póliza</p></div></div> <!></div>');function aa($,z){N(z,!0);const P=()=>M(O,"$page",b),[b,q]=E();let t=f(!1),o=f(g({})),d=g({});C(()=>{const a=P().url.searchParams.get("client_id");a&&(d.client_id=a)});async function S(a){s(t,!0),s(o,{},!0);try{const r=await fetch("/api/policies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),e=await r.json();r.ok?(m({type:"success",message:"Póliza creada exitosamente"}),c("/polizas")):(e.errors&&s(o,e.errors,!0),m({type:"error",message:e.message||"Error al crear póliza"}))}catch{m({type:"error",message:"Error al crear póliza"})}finally{s(t,!1)}}var i=V();T(a=>{k.title="Nueva Póliza - PAS Manager"});var l=n(i),v=n(l),w=n(v);F(w,{variant:"ghost",size:"sm",onclick:()=>c("/polizas"),children:(a,r)=>{var e=U(),A=B(e);J(A,{size:18}),y(),u(a,e)},$$slots:{default:!0}}),y(4),p(v),p(l);var x=D(l,2);I(x,{mode:"create",get initialData(){return d},get loading(){return h(t)},get errors(){return h(o)},onSubmit:S,onCancel:()=>c("/polizas")}),p(i),u($,i),j(),q()}export{aa as component};
