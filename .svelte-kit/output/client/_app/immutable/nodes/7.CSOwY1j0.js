import"../chunks/CWj6FrbW.js";import{o as D}from"../chunks/P-h-QmmT.js";import{a6 as F,a7 as l,a8 as I,N as y,a9 as J,a as n,aa as O,ab as Q,f as b,Q as h,P as U,ac as r,a2 as s,ad as V,ae as w,T as _,c as q}from"../chunks/DXalFYC5.js";import{i as E}from"../chunks/DgS_HarA.js";import{a as G,b as H}from"../chunks/BkTacmYQ.js";import{g as o}from"../chunks/DboXdvGe.js";import{p as K}from"../chunks/MzzRNa-k.js";import{B as L}from"../chunks/ey38HHQe.js";import{C as R}from"../chunks/BujzgcLR.js";import{s as i}from"../chunks/ejPKeNiZ.js";import{A as W}from"../chunks/CNwQjRCr.js";var X=y("<!> Volver",1),Y=y('<div class="loading-state svelte-tr29t"><p class="svelte-tr29t">Cargando datos del cliente...</p></div>'),Z=y('<div class="page svelte-tr29t"><div class="page-header svelte-tr29t"><div class="svelte-tr29t"><!> <h1 class="svelte-tr29t">Editar Cliente</h1> <p class="svelte-tr29t">Modifica los datos del cliente</p></div></div> <!></div>');function pe(z,k){F(k,!0);const x=()=>H(K,"$page",P),[P,S]=G();let $=V(()=>x().params.id),c=l(!1),d=l(!0),p=l(I({})),m=l(null);D(async()=>{await T()});async function T(){r(d,!0);try{const e=await fetch(`/api/clients/${s($)}`),t=await e.json();e.ok?r(m,t.client,!0):(i({type:"error",message:t.message||"Error al cargar cliente"}),o("/clientes"))}catch{i({type:"error",message:"Error al cargar cliente"}),o("/clientes")}finally{r(d,!1)}}async function j(e){r(c,!0),r(p,{},!0);try{const t=await fetch(`/api/clients/${s($)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();t.ok?(i({type:"success",message:"Cliente actualizado exitosamente"}),o("/clientes")):(a.errors&&r(p,a.errors,!0),i({type:"error",message:a.message||"Error al actualizar cliente"}))}catch{i({type:"error",message:"Error al actualizar cliente"})}finally{r(c,!1)}}var v=Z();J(e=>{Q.title="Editar Cliente - PAS Manager"});var f=h(v),C=h(f),A=h(C);L(A,{variant:"ghost",size:"sm",onclick:()=>o("/clientes"),children:(e,t)=>{var a=X(),g=b(a);W(g,{size:18}),w(),n(e,a)},$$slots:{default:!0}}),w(4),_(C),_(f);var M=U(f,2);{var B=e=>{var t=Y();n(e,t)},N=e=>{var t=q(),a=b(t);{var g=u=>{R(u,{mode:"edit",get initialData(){return s(m)},get loading(){return s(c)},get errors(){return s(p)},onSubmit:j,onCancel:()=>o("/clientes")})};E(a,u=>{s(m)&&u(g)},!0)}n(e,t)};E(M,e=>{s(d)?e(B):e(N,!1)})}_(v),n(z,v),O(),S()}export{pe as component};
