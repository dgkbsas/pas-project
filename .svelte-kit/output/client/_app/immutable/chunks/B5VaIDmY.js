import"./CWj6FrbW.js";import{ag as Ne,a7 as he,a8 as ie,a9 as pe,b as x,d as l,ad as z,a3 as h,U as e,r as s,a as g,ab as ge,t as $,ah as Q,ak as de,ai as Se,f as J,aj as Ie,af as we}from"./BKJL6YfG.js";import{b as De}from"./DFnROSPn.js";import{p as _}from"./B-WhYZDZ.js";import{B as fe}from"./PkYitcBM.js";import{I as u}from"./B3SDN7PV.js";import{C as Y}from"./Dltoj_Hs.js";import{o as je}from"./DFUbiISE.js";import{i as Z}from"./CX_YFbLR.js";import{e as ke,i as Te}from"./BpKyf_Cv.js";import{P as Be}from"./DsPSI7mB.js";import{S as qe}from"./BscbxjZa.js";var Ee=x('<div class="loading-indicator svelte-zdghnh">Buscando...</div>'),Ge=(H,o,C)=>o(h(C)),Re=x('<button type="button" class="suggestion-item svelte-zdghnh"><div class="suggestion-main svelte-zdghnh"> <!></div> <div class="suggestion-detail svelte-zdghnh"> <!></div></button>'),Ue=x('<div class="suggestions-dropdown svelte-zdghnh"></div>'),Le=x(`<div class="address-autocomplete-nominatim svelte-zdghnh"><div class="search-container svelte-zdghnh"><!> <!> <!></div> <div class="help-text svelte-zdghnh">💡 Autocompletado gratuito con OpenStreetMap. Los datos pueden no ser
    exactos, verifica y corrige si es necesario.</div> <div class="address-fields-grid svelte-zdghnh"><div class="field-group svelte-zdghnh"><label for="street" class="svelte-zdghnh">Calle</label> <!></div> <div class="field-group svelte-zdghnh"><label for="streetNumber" class="svelte-zdghnh">Número</label> <!></div> <div class="field-group svelte-zdghnh"><label for="floor" class="svelte-zdghnh">Piso</label> <!></div> <div class="field-group svelte-zdghnh"><label for="apartment" class="svelte-zdghnh">Depto</label> <!></div> <div class="field-group svelte-zdghnh"><label for="city" class="svelte-zdghnh">Ciudad</label> <!></div> <div class="field-group svelte-zdghnh"><label for="province" class="svelte-zdghnh">Provincia</label> <!></div> <div class="field-group svelte-zdghnh"><label for="postalCode" class="svelte-zdghnh">Código Postal</label> <!></div></div></div>`);function Oe(H,o){he(o,!0);let C=_(o,"value",15,""),i=_(o,"street",15,""),T=_(o,"streetNumber",15,""),p=_(o,"floor",15,""),r=_(o,"apartment",15,""),L=_(o,"city",15,""),O=_(o,"province",15,""),k=_(o,"postalCode",15,""),K=_(o,"country",15,""),V=_(o,"placeholder",3,"Ingrese dirección"),y=_(o,"disabled",3,!1),A=ie(pe([])),N=ie(!1),G=ie(!1),F;async function d(t){if(t.length<3){z(A,[],!0),z(N,!1);return}z(G,!0);try{const n=await fetch("https://nominatim.openstreetmap.org/search?"+new URLSearchParams({q:t,format:"json",addressdetails:"1",countrycodes:"ar",limit:"5"}),{headers:{"Accept-Language":"es-AR,es;q=0.9"}});if(n.ok){const b=await n.json();z(A,b,!0),z(N,b.length>0)}}catch(n){console.error("Error searching address:",n),z(A,[],!0)}finally{z(G,!1)}}function S(t){const n=t.target;C(n.value),clearTimeout(F),F=setTimeout(()=>{d(C())},300)}function c(t){const n=t.address||{},b={street:n.road||"",streetNumber:n.house_number||"",floor:"",apartment:"",city:n.city||n.town||n.village||"",province:n.state||"",postalCode:n.postcode||"",country:n.country||""};C(t.display_name),i(b.street),T(b.streetNumber),L(b.city),O(b.province),k(b.postalCode),K(b.country),z(N,!1),z(A,[],!0),o.onAddressSelect&&o.onAddressSelect(b)}function m(){setTimeout(()=>{z(N,!1)},200)}je(()=>()=>{clearTimeout(F)});var a=Le(),I=l(a),w=l(I);u(w,{get placeholder(){return V()},get error(){return o.error},get disabled(){return y()},autocomplete:"off",oninput:S,onblur:m,onfocus:()=>C().length>=3&&h(A).length>0&&z(N,!0),get value(){return C()},set value(t){C(t)}});var R=e(w,2);{var D=t=>{var n=Ee();g(t,n)};Z(R,t=>{h(G)&&t(D)})}var ee=e(R,2);{var M=t=>{var n=Ue();ke(n,21,()=>h(A),Te,(b,j)=>{var X=Re();X.__click=[Ge,c,j];var oe=l(X),ve=l(oe),Ce=e(ve);{var Ae=P=>{var f=de();$(()=>Q(f,h(j).address.house_number)),g(P,f)};Z(Ce,P=>{var f;(f=h(j).address)!=null&&f.house_number&&P(Ae)})}s(oe);var ce=e(oe,2),ue=l(ce),Pe=e(ue);{var xe=P=>{var f=de();$(()=>Q(f,`, ${h(j).address.state??""}`)),g(P,f)};Z(Pe,P=>{var f;(f=h(j).address)!=null&&f.state&&P(xe)})}s(ce),s(X),$(()=>{var P,f,me,_e;Q(ve,`${(((P=h(j).address)==null?void 0:P.road)||((f=h(j).address)==null?void 0:f.suburb)||"")??""} `),Q(ue,`${(((me=h(j).address)==null?void 0:me.city)||((_e=h(j).address)==null?void 0:_e.town)||"")??""} `)}),g(b,X)}),s(n),g(t,n)};Z(ee,t=>{h(N)&&h(A).length>0&&t(M)})}s(I);var W=e(I,4),B=l(W),re=e(l(B),2);u(re,{id:"street",placeholder:"Nombre de la calle",get disabled(){return y()},get value(){return i()},set value(t){i(t)}}),s(B);var q=e(B,2),ae=e(l(q),2);u(ae,{id:"streetNumber",placeholder:"1234",get disabled(){return y()},get value(){return T()},set value(t){T(t)}}),s(q);var E=e(q,2),te=e(l(E),2);u(te,{id:"floor",placeholder:"5",get disabled(){return y()},get value(){return p()},set value(t){p(t)}}),s(E);var U=e(E,2),se=e(l(U),2);u(se,{id:"apartment",placeholder:"A",get disabled(){return y()},get value(){return r()},set value(t){r(t)}}),s(U);var v=e(U,2),be=e(l(v),2);u(be,{id:"city",placeholder:"Ciudad",get disabled(){return y()},get value(){return L()},set value(t){L(t)}}),s(v);var le=e(v,2),ye=e(l(le),2);u(ye,{id:"province",placeholder:"Provincia",get disabled(){return y()},get value(){return O()},set value(t){O(t)}}),s(le);var ne=e(le,2),ze=e(l(ne),2);u(ze,{id:"postalCode",placeholder:"1234",get disabled(){return y()},get value(){return k()},set value(t){k(t)}}),s(ne),s(W),s(a),g(H,a),ge()}Ne(["click"]);var Fe=x('<div class="card-header svelte-vs637i"><h2 class="svelte-vs637i">Información Personal</h2></div> <div class="form-grid svelte-vs637i"><div class="form-group svelte-vs637i"><label for="first_name" class="svelte-vs637i">Nombre <span class="required svelte-vs637i">*</span></label> <!></div> <div class="form-group svelte-vs637i"><label for="last_name" class="svelte-vs637i">Apellido <span class="required svelte-vs637i">*</span></label> <!></div> <div class="form-group svelte-vs637i"><label for="document_number" class="svelte-vs637i">DNI/CUIT</label> <!></div> <div class="form-group svelte-vs637i"><label for="birth_date" class="svelte-vs637i">Fecha de Nacimiento</label> <!></div> <div class="form-group svelte-vs637i"><label for="email_primary" class="svelte-vs637i">Email Principal</label> <!></div> <div class="form-group svelte-vs637i"><label for="email_secondary" class="svelte-vs637i">Email Secundario</label> <!></div> <div class="form-group svelte-vs637i"><label for="phone" class="svelte-vs637i">Celular (ARG)</label> <!></div> <div class="form-group svelte-vs637i"><label for="phone_landline" class="svelte-vs637i">Teléfono</label> <!></div></div>',1),Me=x('<div class="card-header svelte-vs637i"><h2 class="svelte-vs637i">Dirección</h2> <p class="card-description svelte-vs637i">Usa el autocompletado para buscar la dirección</p></div> <!>',1),Je=x('<div class="card-header svelte-vs637i"><h2 class="svelte-vs637i">Información Adicional</h2></div> <div class="form-grid svelte-vs637i"><div class="form-group svelte-vs637i"><label for="alias_pas" class="svelte-vs637i">Alias PAS</label> <!></div> <div class="form-group svelte-vs637i"><label for="referred_by" class="svelte-vs637i">Referido Por</label> <!></div></div>',1),Qe=x('<div class="card-header svelte-vs637i"><h2 class="svelte-vs637i">Observaciones</h2></div> <div class="form-group svelte-vs637i"><label for="observations" class="svelte-vs637i">Observaciones</label> <textarea id="observations" placeholder="Información adicional sobre el cliente..." rows="4" class="svelte-vs637i"></textarea></div>',1),He=x("<!> ",1),Ke=x('<form class="svelte-vs637i"><!> <!> <!> <!> <div class="form-actions svelte-vs637i"><!> <!></div></form>');function or(H,o){he(o,!0);let C=_(o,"mode",3,"create"),i=_(o,"initialData",19,()=>({})),T=_(o,"loading",3,!1),p=_(o,"errors",19,()=>({})),r=pe({first_name:i().first_name||"",last_name:i().last_name||"",document_number:i().document_number||"",birth_date:i().birth_date||"",email_primary:i().email_primary||"",email_secondary:i().email_secondary||"",phone:i().phone||"",phone_landline:i().phone_landline||"",address:i().address||"",street:i().street||"",street_number:i().street_number||"",floor:i().floor||"",apartment:i().apartment||"",city:i().city||"",province:i().province||"",postal_code:i().postal_code||"",alias_pas:i().alias_pas||"",referred_by:i().referred_by||"",observations:i().observations||""});function L(d){const S=[d.street,d.streetNumber,d.floor&&`Piso ${d.floor}`,d.apartment&&`Depto ${d.apartment}`].filter(Boolean);r.address=S.join(" ")}function O(d){d.preventDefault(),o.onSubmit(r)}var k=Ke(),K=l(k);Y(K,{children:(d,S)=>{var c=Fe(),m=e(J(c),2),a=l(m),I=e(l(a),2);u(I,{id:"first_name",placeholder:"Ej: Juan",get error(){return p().first_name},required:!0,get value(){return r.first_name},set value(v){r.first_name=v}}),s(a);var w=e(a,2),R=e(l(w),2);u(R,{id:"last_name",placeholder:"Ej: Pérez García",get error(){return p().last_name},required:!0,get value(){return r.last_name},set value(v){r.last_name=v}}),s(w);var D=e(w,2),ee=e(l(D),2);u(ee,{id:"document_number",placeholder:"12345678",get error(){return p().document_number},get value(){return r.document_number},set value(v){r.document_number=v}}),s(D);var M=e(D,2),W=e(l(M),2);u(W,{id:"birth_date",type:"date",get error(){return p().birth_date},get value(){return r.birth_date},set value(v){r.birth_date=v}}),s(M);var B=e(M,2),re=e(l(B),2);u(re,{id:"email_primary",type:"email",placeholder:"ejemplo@email.com",get error(){return p().email_primary},get value(){return r.email_primary},set value(v){r.email_primary=v}}),s(B);var q=e(B,2),ae=e(l(q),2);u(ae,{id:"email_secondary",type:"email",placeholder:"secundario@email.com",get error(){return p().email_secondary},get value(){return r.email_secondary},set value(v){r.email_secondary=v}}),s(q);var E=e(q,2),te=e(l(E),2);Be(te,{get error(){return p().phone},get value(){return r.phone},set value(v){r.phone=v}}),s(E);var U=e(E,2),se=e(l(U),2);u(se,{id:"phone_landline",type:"tel",placeholder:"011 1234-5678",get error(){return p().phone_landline},get value(){return r.phone_landline},set value(v){r.phone_landline=v}}),s(U),s(m),g(d,c)},$$slots:{default:!0}});var V=e(K,2);Y(V,{children:(d,S)=>{var c=Me(),m=e(J(c),2);Oe(m,{placeholder:"Buscar dirección en Argentina...",onAddressSelect:L,get value(){return r.address},set value(a){r.address=a},get street(){return r.street},set street(a){r.street=a},get streetNumber(){return r.street_number},set streetNumber(a){r.street_number=a},get floor(){return r.floor},set floor(a){r.floor=a},get apartment(){return r.apartment},set apartment(a){r.apartment=a},get city(){return r.city},set city(a){r.city=a},get province(){return r.province},set province(a){r.province=a},get postalCode(){return r.postal_code},set postalCode(a){r.postal_code=a}}),g(d,c)},$$slots:{default:!0}});var y=e(V,2);Y(y,{children:(d,S)=>{var c=Je(),m=e(J(c),2),a=l(m),I=e(l(a),2);u(I,{id:"alias_pas",placeholder:"Alias o apodo del cliente",get error(){return p().alias_pas},get value(){return r.alias_pas},set value(D){r.alias_pas=D}}),s(a);var w=e(a,2),R=e(l(w),2);u(R,{id:"referred_by",placeholder:"¿Quién lo refirió?",get error(){return p().referred_by},get value(){return r.referred_by},set value(D){r.referred_by=D}}),s(w),s(m),g(d,c)},$$slots:{default:!0}});var A=e(y,2);Y(A,{children:(d,S)=>{var c=Qe(),m=e(J(c),2),a=e(l(m),2);Ie(a),s(m),De(a,()=>r.observations,I=>r.observations=I),g(d,c)},$$slots:{default:!0}});var N=e(A,2),G=l(N);fe(G,{type:"button",variant:"outline",get onclick(){return o.onCancel},get disabled(){return T()},children:(d,S)=>{we();var c=de("Cancelar");g(d,c)},$$slots:{default:!0}});var F=e(G,2);fe(F,{type:"submit",variant:"primary",get disabled(){return T()},children:(d,S)=>{var c=He(),m=J(c);qe(m,{size:18});var a=e(m);$(()=>Q(a,` ${T()?"Guardando...":C()==="create"?"Guardar Cliente":"Guardar Cambios"}`)),g(d,c)},$$slots:{default:!0}}),s(N),s(k),Se("submit",k,O),g(H,k),ge()}export{or as C};
